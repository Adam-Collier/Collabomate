extends layout

block content
  .container
    if messages.success
      div.text-success
        for success in messages.success
          div= success.msg
    if messages.error
      div.text-danger
        for error in messages.error
          div= error.msg
    h1 Profile
    .profile
      
      div
        
        //- img.gravatar(src=user.gravatar, width='100', height='100')
        form(method='POST', action='/profile?_method=PUT')
          label(for='email') Email
          input(type='email', name='email', id='email', value=user.email)

          label(for='name') Name
          input(type='text', name='name', id='name', value=user.name)

          label(for='website') Website
          input(type='text', name='website', id='website', value=user.website)

          br
          button(type='submit') Update Profile
        
        h3 Change Password

        form(method='POST', action='/profile?_method=PUT')
          label(for='password') New Password
          input(type='password', name='password', id='password')
          label(for='confirm') Confirm Password
          input(type='password', name='confirm', id='confirm')
          br
          button(type='submit') Change Password

        h3 Linked Accounts
        if user.github
          p: a.text-danger(href='/unlink/github') Unlink your Github account
        else
          p: a(href='/auth/github') Link your Github account

        h3 Delete Account
        form(method='POST', action='/profile?_method=DELETE')
          p You can delete your account, but keep in mind this action is irreversible.
          button#delete(type='submit') Delete my account

    h1 Projects
    form(method='POST').addProject
      h3 Add a project
      input(type='text', name='project', id='project', value=user.project)
      br
      input(type='radio', name='difficulty', value='Beginner')
      p beginner
      input(type='radio', name='difficulty', value='Intermediate')
      p intermediate
      input(type='radio', name='difficulty', value='Advanced')
      p advanced
      br
      textarea(placeholder='Add a comment about what you want help with' name='comment')
      button(type='submit') Update Projects    
    .projects
      for project in projects
        //- p #{project.repo}
        .project
          div
            a.del-project(href= "/delete/" + encodeURIComponent(project.repoUrl))
              <?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg width="100%" height="100%" viewBox="0 0 59 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"><path d="M53.981,1.84l0.217,0.028l0.213,0.047l0.208,0.066l0.201,0.083l0.194,0.101l0.184,0.117l0.173,0.133l0.16,0.147l0.148,0.161l0.132,0.173l0.118,0.184l0.1,0.194l0.084,0.201l0.065,0.208l0.048,0.213l0.028,0.216l0.01,0.218l-0.01,0.218l-0.028,0.216l-0.048,0.213l-0.065,0.208l-0.084,0.202l-0.1,0.193l-0.118,0.184l-0.132,0.173l-0.148,0.161l-49.433,49.433l-0.161,0.148l-0.173,0.133l-0.184,0.117l-0.193,0.101l-0.202,0.083l-0.208,0.066l-0.213,0.047l-0.216,0.028l-0.218,0.01l-0.218,-0.01l-0.216,-0.028l-0.213,-0.047l-0.208,-0.066l-0.202,-0.083l-0.193,-0.101l-0.184,-0.117l-0.173,-0.133l-0.161,-0.148l-0.147,-0.16l-0.133,-0.173l-0.117,-0.184l-0.101,-0.194l-0.083,-0.201l-0.066,-0.208l-0.047,-0.213l-0.028,-0.216l-0.01,-0.218l0.01,-0.218l0.028,-0.216l0.047,-0.213l0.066,-0.208l0.083,-0.202l0.101,-0.193l0.117,-0.184l0.133,-0.173l0.147,-0.161l49.434,-49.434l0.161,-0.147l0.173,-0.133l0.184,-0.117l0.193,-0.101l0.202,-0.083l0.208,-0.066l0.212,-0.047l0.217,-0.028l0.218,-0.01l0.217,0.01Z" style="fill:#000;"/><path d="M4.548,1.84l0.216,0.028l0.213,0.047l0.208,0.066l0.202,0.083l0.193,0.101l0.184,0.117l0.173,0.133l0.161,0.147l49.433,49.434l0.148,0.161l0.132,0.173l0.118,0.184l0.1,0.193l0.084,0.202l0.065,0.208l0.048,0.213l0.028,0.216l0.01,0.218l-0.01,0.218l-0.028,0.216l-0.048,0.213l-0.065,0.208l-0.084,0.201l-0.1,0.194l-0.118,0.184l-0.132,0.173l-0.148,0.16l-0.16,0.148l-0.173,0.133l-0.184,0.117l-0.194,0.101l-0.201,0.083l-0.208,0.066l-0.213,0.047l-0.217,0.028l-0.217,0.01l-0.218,-0.01l-0.217,-0.028l-0.212,-0.047l-0.208,-0.066l-0.202,-0.083l-0.193,-0.101l-0.184,-0.117l-0.173,-0.133l-0.161,-0.148l-49.434,-49.433l-0.147,-0.161l-0.133,-0.173l-0.117,-0.184l-0.101,-0.193l-0.083,-0.202l-0.066,-0.208l-0.047,-0.213l-0.028,-0.216l-0.01,-0.218l0.01,-0.218l0.028,-0.216l0.047,-0.213l0.066,-0.208l0.083,-0.201l0.101,-0.194l0.117,-0.184l0.133,-0.173l0.147,-0.161l0.161,-0.147l0.173,-0.133l0.184,-0.117l0.193,-0.101l0.202,-0.083l0.208,-0.066l0.213,-0.047l0.216,-0.028l0.218,-0.01l0.218,0.01Z" style="fill:#000;"/></svg>
            div
              h2.name #{project.repo}
              p.username #{project.username}
              a.repo(href= project.repoUrl) Github repo
            div
              p.level #{project.difficulty}
          div
            h4 comment
            p.comment #{project.comment}
          div
            div
              p.readme README
              svg(width="100%", height="100%", viewbox="0 0 5 6", version="1.1", xmlns="http://www.w3.org/2000/svg", xmlns:xlink="http://www.w3.org/1999/xlink", xml:space="preserve", style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;")
                path(d="M4.154,2.505l-4.154,2.506l0,-5.011l4.154,2.505Z", style="fill:#000;")
            p.languages #{project.languages}
          .github-readme
            | !{project.README}

    script.
      document.querySelectorAll('.readme').forEach(function(x){
          x.addEventListener('click', function(){
          var readme = this.parentElement.parentElement;
          // readme.nextElementSibling.classList.toggle('accordian')
          this.nextElementSibling.classList.toggle('arrow')

          if (readme.nextElementSibling.style.maxHeight) {
            readme.nextElementSibling.style.maxHeight = null;
          } else {
            readme.nextElementSibling.style.maxHeight = readme.nextElementSibling.scrollHeight + "px";
          }
        })
      })
      
